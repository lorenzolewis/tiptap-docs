---
title: Table Extend Row/Column Button
meta:
  title: Table Extend Row/Column Button | Tiptap UI Components
  description: Interactive buttons for extending and contracting table dimensions by dragging or clicking, with smart empty cell detection.
  category: UI Components
component:
  name: Table Extend Row/Column Button
  description: Interactive drag handles for adding or removing rows and columns at table edges.
  type: component
  isFree: false
  isCloud: false
  isOpen: false
  isNew: true
  icon: TableIcon
tags:
  - type: start
---

import { CodeDemo } from '@/components/CodeDemo'

Interactive button components for extending and contracting table dimensions in Tiptap editors. These buttons appear at the bottom and right edges of tables, allowing users to add or remove rows and columns through both clicking and dragging interactions.

<CodeDemo
  isScrollable
  src="https://template.tiptap.dev/preview/tiptap-ui/table-extend-row-column-button"
/>

## Installation

Add the component via the Tiptap CLI:

```bash
npx @tiptap/cli@latest add table-extend-row-column-button
```

## Components

### `<TableExtendRowColumnButtons />`

The main component that renders both row and column extend buttons positioned at the table edges using Floating UI.

#### Usage

```tsx
import { EditorContext } from '@tiptap/react'
import { TableExtendRowColumnButtons } from '@/registry/tiptap-ui/table-extend-row-column-button'

function MyEditor() {
  return (
    <EditorContext.Provider value={{ editor }}>
      <EditorContent editor={editor} />
      <TableExtendRowColumnButtons />
    </EditorContext.Provider>
  )
}
```

### Props

| Name          | Type             | Default     | Description                                         |
| ------------- | ---------------- | ----------- | --------------------------------------------------- |
| `editor`      | `Editor \| null` | `undefined` | The Tiptap editor instance. Uses context if omitted |
| `onMouseDown` | `() => void`     | `undefined` | Callback when drag operation starts                 |
| `onMouseUp`   | `() => void`     | `undefined` | Callback when drag operation ends                   |

### `<TableExtendRowColumnButton />`

The individual button component for a single orientation (row or column). This is typically used internally by `TableExtendRowColumnButtons` but can be used directly for custom implementations.

#### Props

| Name          | Type             | Default      | Description                                |
| ------------- | ---------------- | ------------ | ------------------------------------------ |
| `editor`      | `Editor \| null` | `undefined`  | The Tiptap editor instance                 |
| `block`       | `Node`           | **required** | The table node                             |
| `onMouseDown` | `() => void`     | **required** | Callback when drag operation starts        |
| `onMouseUp`   | `() => void`     | **required** | Callback when drag operation ends          |
| `orientation` | `Orientation`    | **required** | Whether this is a "row" or "column" button |
| `children`    | `ReactNode`      | `undefined`  | Custom content (defaults to plus icon)     |

## Usage Examples

### Basic Implementation

```tsx
'use client'

import { EditorContent, EditorContext, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { TableExtendRowColumnButtons } from '@/registry/tiptap-ui/table-extend-row-column-button'

export const BasicExample = () => {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <h2>Table with Extend Buttons</h2>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Product</strong></p></th>
            <th><p><strong>Price</strong></p></th>
            <th><p><strong>Stock</strong></p></th>
          </tr>
          <tr>
            <td><p>Laptop</p></td>
            <td><p>$999</p></td>
            <td><p>25</p></td>
          </tr>
          <tr>
            <td><p>Phone</p></td>
            <td><p>$699</p></td>
            <td><p>50</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <EditorContext.Provider value={{ editor }}>
      <EditorContent editor={editor} />
      <TableExtendRowColumnButtons />
    </EditorContext.Provider>
  )
}
```

### With Callbacks

```tsx
'use client'

import { useCallback } from 'react'
import { EditorContent, EditorContext, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { TableExtendRowColumnButtons } from '@/registry/tiptap-ui/table-extend-row-column-button'

export const CallbackExample = () => {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <table>
        <tbody>
          <tr>
            <td><p>Cell 1</p></td>
            <td><p>Cell 2</p></td>
          </tr>
          <tr>
            <td><p>Cell 3</p></td>
            <td><p>Cell 4</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  const handleDragStart = useCallback(() => {
    console.log('Started dragging to extend/contract table')
  }, [])

  const handleDragEnd = useCallback(() => {
    console.log('Finished dragging')
  }, [])

  return (
    <EditorContext.Provider value={{ editor }}>
      <EditorContent editor={editor} />
      <TableExtendRowColumnButtons onMouseDown={handleDragStart} onMouseUp={handleDragEnd} />
    </EditorContext.Provider>
  )
}
```

## Behavior

### Button Positioning

The extend buttons are positioned using Floating UI:

- **Row button** - Appears at the bottom edge of the table, spanning the full width
- **Column button** - Appears at the right edge of the table, spanning the full height
- **Visibility** - Buttons only appear when hovering over the table and the editor is editable
- **Placement** - Automatically adjusts based on available space

The buttons are rendered via `FloatingPortal` to ensure they appear above other content.

### Click Interaction

When a user **clicks** an extend button:

1. **Selects last cell** - Focuses the last cell in the current row/column
2. **Adds one row/column** - Executes `addRowAfter()` or `addColumnAfter()`
3. **Preserves cursor** - Maintains cursor position after the operation
4. **Single action** - Adds exactly one row or column

### Drag Interaction

When a user **drags** an extend button:

1. **Tracks mouse position** - Monitors movement in the drag direction (Y for rows, X for columns)
2. **Calculates delta** - Determines how many rows/columns to add or remove based on drag distance
3. **Executes operations** - Adds or removes rows/columns in batch

### Adding Rows/Columns (Drag Outward)

When dragging outward (positive delta):

1. **Selects last cell** - Sets focus to the last cell in the table
2. **Adds multiple** - Iterates and adds rows/columns one at a time
3. **Preserves content** - All existing content remains unchanged
4. **No limit** - Can add as many rows/columns as dragged

### Removing Rows/Columns (Drag Inward)

When dragging inward (negative delta):

1. **Counts empty cells** - Uses `countEmptyRowsFromEnd()` or `countEmptyColumnsFromEnd()`
2. **Validates removal** - Only removes empty rows/columns from the end
3. **Safety limit** - Keeps at least 1 row/column (cannot remove the entire table)
4. **Preserves content** - Non-empty rows/columns cannot be removed

#### Empty Cell Detection

The component uses utility functions to count consecutive empty cells from the end:

- **`countEmptyRowsFromEnd()`** - Scans from the last row upward
- **`countEmptyColumnsFromEnd()`** - Scans from the last column leftward
- **Deduplication** - Uses `TableMap` to handle merged cells correctly
- **Empty definition** - A cell is empty if it has no content or only whitespace

### Cursor Preservation

All operations use `runPreservingCursor()` to maintain the user's cursor position:

```typescript
runPreservingCursor(editor, () => {
  selectLastCell(editor, state.block, state.blockPos, orientation)
  // Perform add/remove operations
})
```

This ensures that the cursor returns to its original position after the table modification.

### Handle Freezing

During drag operations:

- **`freezeHandles()`** - Called on `mousedown` to prevent other table handles from interfering
- **`unfreezeHandles()`** - Called on `mouseup` to restore normal handle behavior

## Requirements

### Dependencies

- `@tiptap/react` - Core Tiptap React integration
- `@tiptap/pm/model` - ProseMirror model (Node)
- `@tiptap/pm/tables` - ProseMirror table utilities (TableMap)
- `@floating-ui/react` - Floating UI for positioning (FloatingPortal, useFloating, useTransitionStyles)
- `react` - React framework

### Required Extensions

- `tableHandle` - Table handle extension for detecting table state
- `table` - Table node extension (TableKit)

### Required Components

- No additional UI components required - this is a standalone component

### Required Hooks

- `useTiptapEditor` - Custom hook for editor instance management
- `useTableHandleState` - Hook for detecting table state and position

### Referenced Utilities

- `tiptap-table-utils` (lib) - Utility functions:
  - `countEmptyRowsFromEnd` - Count empty rows from table bottom
  - `countEmptyColumnsFromEnd` - Count empty columns from table right
  - `selectLastCell` - Select the last cell in a row/column
  - `runPreservingCursor` - Execute operations while preserving cursor position
  - `marginRound` - Round with dead zone for smooth drag UX
  - `EMPTY_CELL_HEIGHT` - Default empty cell height (40px)
  - `EMPTY_CELL_WIDTH` - Default empty cell width (100px)

## Related Components

- **Table Handle** - For hover-based row/column manipulation
- **Table Add Row/Column Button** - For adding rows/columns at specific positions
- **Table Delete Row/Column Button** - For deleting specific rows/columns
- **Table Move Row/Column Button** - For moving rows and columns
- **Table Duplicate Row/Column Button** - For duplicating rows and columns
- **Table Node (TableKit)** - The core table node extension
- **Table Handle Extension** - Required extension for table state detection
