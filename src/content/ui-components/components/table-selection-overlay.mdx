---
title: Table Selection Overlay
meta:
  title: Table Selection Overlay | Tiptap UI Components
  description: A visual overlay component that highlights selected table cells with optional resize handles and menu integration for advanced table interactions.
  category: UI Components
component:
  name: Table Selection Overlay
  description: A prebuilt React component that renders a visual overlay on selected table cells with resize handles and menu support.
  type: component
  isFree: false
  isCloud: false
  isOpen: false
  isNew: true
  icon: TableIcon
tags:
  - type: start
---

import { CodeDemo } from '@/components/CodeDemo'

A visual overlay component that highlights selected table cells in Tiptap editors. Provides clear visual feedback for cell selections with optional resize handles, menu integration, and automatic positioning using Floating UI.

<CodeDemo
  isScrollable
  src="https://template.tiptap.dev/preview/tiptap-ui/table-selection-overlay"
/>

## Installation

Add the component via the Tiptap CLI:

```bash
npx @tiptap/cli@latest add table-selection-overlay
```

## Components

### `<TableSelectionOverlay />`

A prebuilt React component that renders a visual overlay on both single and multi-cell selections with optional corner resize handles and menu integration.

#### Usage

```tsx
import { TableSelectionOverlay } from '@/registry/tiptap-ui/table-selection-overlay'

function MyEditor() {
  return (
    <>
      <EditorContent editor={editor} />
      <TableSelectionOverlay editor={editor} />
    </>
  )
}
```

#### Props

| Name                | Type                                                                                                                                                                      | Default     | Description                                          |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ---------------------------------------------------- |
| `editor`            | `Editor \| null`                                                                                                                                                          | `undefined` | The Tiptap editor instance                           |
| `cellMenu`          | `React.ComponentType<{ onOpenChange?: (isOpen: boolean) => void; editor?: Editor \| null; onResizeStart?: (handle: ResizeHandle) => (event: React.MouseEvent) => void }>` | `undefined` | Optional menu component to render inside the overlay |
| `showResizeHandles` | `boolean`                                                                                                                                                                 | `true`      | Whether to show corner resize handles                |
| `onMenuOpenChange`  | `(isOpen: boolean) => void`                                                                                                                                               | `undefined` | Callback fired when the menu open state changes      |

#### ResizeHandle Type

```typescript
type ResizeHandle = 'tl' | 'tr' | 'bl' | 'br' | null
```

- `tl` - Top-left corner
- `tr` - Top-right corner
- `bl` - Bottom-left corner
- `br` - Bottom-right corner

## Usage Examples

### Basic Example

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableSelectionOverlay } from '@/registry/tiptap-ui/table-selection-overlay'

export const BasicExample = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit],
    content: `
      <h2>Table Selection Overlay Demo</h2>
      <p>Click inside a table cell or drag to select multiple cells to see the overlay.</p>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Product</strong></p></th>
            <th><p><strong>Price</strong></p></th>
            <th><p><strong>Stock</strong></p></th>
          </tr>
          <tr>
            <td><p>Laptop</p></td>
            <td><p>$999</p></td>
            <td><p>15</p></td>
          </tr>
          <tr>
            <td><p>Mouse</p></td>
            <td><p>$29</p></td>
            <td><p>50</p></td>
          </tr>
          <tr>
            <td><p>Keyboard</p></td>
            <td><p>$79</p></td>
            <td><p>30</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <>
      <EditorContent editor={editor} />
      <TableSelectionOverlay editor={editor} />
    </>
  )
}
```

### With Resize Handles Disabled

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableSelectionOverlay } from '@/registry/tiptap-ui/table-selection-overlay'

export const WithoutResizeHandles = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit],
    content: `
      <h2>Selection Overlay Without Resize Handles</h2>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Name</strong></p></th>
            <th><p><strong>Role</strong></p></th>
          </tr>
          <tr>
            <td><p>Alice</p></td>
            <td><p>Developer</p></td>
          </tr>
          <tr>
            <td><p>Bob</p></td>
            <td><p>Designer</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <>
      <EditorContent editor={editor} />
      <TableSelectionOverlay editor={editor} showResizeHandles={false} />
    </>
  )
}
```

### With Custom Cell Menu

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableSelectionOverlay } from '@/registry/tiptap-ui/table-selection-overlay'
import type { Editor } from '@tiptap/react'

// Custom menu component
const CustomCellMenu = ({
  editor,
  onOpenChange,
}: {
  editor?: Editor | null
  onOpenChange?: (isOpen: boolean) => void
}) => {
  return (
    <div style={{ position: 'absolute', top: -40, left: 0 }}>
      <button onClick={() => editor?.chain().focus().deleteColumn().run()}>Delete Column</button>
      <button onClick={() => editor?.chain().focus().deleteRow().run()}>Delete Row</button>
    </div>
  )
}

export const WithCellMenu = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit],
    content: `
      <h2>Selection Overlay with Custom Cell Menu</h2>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Q1</strong></p></th>
            <th><p><strong>Q2</strong></p></th>
          </tr>
          <tr>
            <td><p>$1.2M</p></td>
            <td><p>$1.4M</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <>
      <EditorContent editor={editor} />
      <TableSelectionOverlay editor={editor} cellMenu={CustomCellMenu} />
    </>
  )
}
```

### Complete Example

```tsx
'use client'

import { useState } from 'react'
import { EditorContent, EditorContext, useEditor } from '@tiptap/react'

// --- Tiptap Core Extensions ---
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'

// --- Tiptap UI ---
import { TableSelectionOverlay } from '@/registry/tiptap-ui/table-selection-overlay'

// --- Tiptap Node Styles ---
import '@/registry/tiptap-node/heading-node/heading-node.scss'
import '@/registry/tiptap-node/paragraph-node/paragraph-node.scss'
import '@/registry/tiptap-node/table-node/table-node.scss'

export const TableSelectionOverlayExample = () => {
  const [enableResizer, setEnableResizer] = useState(true)

  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, TableKit],
    content: `
      <h2>Table Selection Overlay Demo</h2>
      <p>
        Click inside the table cells below to see the overlay with resize handles.
      </p>

      <table>
        <tbody>
          <tr>
            <th><p><strong>Country</strong></p></th>
            <th><p><strong>Capital</strong></p></th>
            <th><p><strong>Language</strong></p></th>
          </tr>
          <tr>
            <td><p>Spain</p></td>
            <td><p>Madrid</p></td>
            <td><p>Spanish</p></td>
          </tr>
          <tr>
            <td><p>Germany</p></td>
            <td><p>Berlin</p></td>
            <td><p>German</p></td>
          </tr>
          <tr>
            <td><p>Indonesia</p></td>
            <td><p>Jakarta</p></td>
            <td><p>Indonesian</p></td>
          </tr>
        </tbody>
      </table>

      <h3>Features:</h3>
      <ul>
        <li><strong>Single cell selection:</strong> Click on any cell to see the overlay</li>
        <li><strong>Multi-cell selection:</strong> Click and drag across cells or use shift+click</li>
        <li><strong>Resize handles:</strong> Drag the corner handles to resize your selection</li>
        <li><strong>Menu integration:</strong> Add custom menus via the cellMenu prop</li>
      </ul>
    `,
  })

  return (
    <EditorContext.Provider value={{ editor }}>
      <div>
        <button onClick={() => setEnableResizer(!enableResizer)}>
          Toggle Resize Handles: {enableResizer ? 'ON' : 'OFF'}
        </button>
      </div>
      <EditorContent editor={editor} role="presentation" className="control-showcase" />
      <TableSelectionOverlay editor={editor} showResizeHandles={enableResizer} />
    </EditorContext.Provider>
  )
}
```

## Behavior

### Automatic Positioning

The overlay uses Floating UI for precise positioning and automatically:

- Calculates the bounding box of selected cells
- Updates position during scrolling and editor changes
- Renders in a FloatingPortal within the table's overlay container
- Maintains correct positioning during column resizing operations

### Selection Detection

The component detects and handles two types of selections:

1. **Multi-cell selection (CellSelection)**: When multiple cells are selected via drag or shift+click
2. **Single cell selection**: When cursor is positioned in a single cell

The overlay updates in real-time as the selection changes.

### Resize Handles

When `showResizeHandles={true}` (default), four corner handles are rendered:

- **Top-left (tl)**: Anchors to bottom-right, extends selection upward and left
- **Top-right (tr)**: Anchors to bottom-left, extends selection upward and right
- **Bottom-left (bl)**: Anchors to top-right, extends selection downward and left
- **Bottom-right (br)**: Anchors to top-left, extends selection downward and right

Handles are disabled when a menu is open to prevent conflicts.

### Column Resizing Integration

The component includes a custom hook (`useResizeOverlay`) that:

- Detects when column resizing begins via the `columnResizingPluginKey` plugin state
- Starts a requestAnimationFrame loop to update overlay position during drag
- Stops the loop when resizing ends
- Ensures the overlay stays aligned with cells during resize operations

## Requirements

### Dependencies

- `@tiptap/react` - Core Tiptap React integration
- `@tiptap/pm/tables` - ProseMirror table utilities (CellSelection, cellAround, columnResizingPluginKey)
- `@tiptap/pm/state` - ProseMirror state management
- `@tiptap/pm/model` - ProseMirror document model
- `@tiptap/pm/view` - ProseMirror view
- `@floating-ui/react` - Floating UI for positioning (FloatingPortal, useFloating)
- `react` - React framework

### Required Extensions

- `table` - Table node extension (TableKit)

### Referenced Components & Utilities

- `useTiptapEditor` (hook) - Custom hook for editor instance management
- `tiptap-table-utils` (lib) - Utility functions:
  - `domCellAround` - Find cell element from DOM node
  - `getTable` - Get table node information
  - `rectEq` - Compare DOMRect objects for equality

## Related Components

- **Table Cell Handle Menu** - Menu component that can be passed via `cellMenu` prop
- **Table Handle** - For hover-based table manipulation
- **Table Extend Row Column Button** - For adding rows and columns
- **Table Node (TableKit)** - The core table node extension
