---
title: Table Move Row/Column Button
meta:
  title: Table Move Row/Column Button | Tiptap UI Components
  description: A button component and hook for moving table rows and columns in Tiptap editors, with intelligent validation and merged cell handling.
  category: UI Components
component:
  name: Table Move Row/Column Button
  description: A prebuilt button component and hook for moving table rows up/down and columns left/right.
  type: component
  isFree: false
  isCloud: false
  isOpen: false
  isNew: true
  icon: TableIcon
tags:
  - type: start
---

import { CodeDemo } from '@/components/CodeDemo'

A button component and custom hook for moving table rows and columns in Tiptap editors. Supports moving rows up/down and columns left/right with intelligent validation to prevent operations on tables with merged cells.

<CodeDemo
  isScrollable
  src="https://template.tiptap.dev/preview/tiptap-ui/table-move-row-column-button"
/>

## Installation

Add the component via the Tiptap CLI:

```bash
npx @tiptap/cli@latest add table-move-row-column-button
```

## Components

### `<TableMoveRowColumnButton />`

A prebuilt button component for triggering row/column move operations.

#### Usage

```tsx
import { TableMoveRowColumnButton } from '@/registry/tiptap-ui/table-move-row-column-button'

function MyMoveButton() {
  return <TableMoveRowColumnButton editor={editor} index={0} orientation="row" direction="up" />
}
```

### Props

| Name                  | Type             | Default      | Description                                                                |
| --------------------- | ---------------- | ------------ | -------------------------------------------------------------------------- |
| `editor`              | `Editor \| null` | `undefined`  | The Tiptap editor instance                                                 |
| `index`               | `number`         | `undefined`  | The index of the row or column to move. If omitted, uses current selection |
| `orientation`         | `Orientation`    | `undefined`  | Whether moving a "row" or "column". If omitted, uses current selection     |
| `tablePos`            | `number`         | `undefined`  | The position of the table in the document                                  |
| `direction`           | `MoveDirection`  | **required** | The direction to move: "up", "down", "left", or "right"                    |
| `hideWhenUnavailable` | `boolean`        | `false`      | Hide the button when moving isn't currently possible                       |
| `onMoved`             | `() => void`     | `undefined`  | Callback function called after a successful move                           |
| `text`                | `string`         | `undefined`  | Optional text to display alongside the icon                                |
| `...buttonProps`      | `ButtonProps`    | -            | All other props from the base Button component                             |

## Hook

### `useTableMoveRowColumn(config)`

For custom button implementations, use the hook directly:

#### Usage

```tsx
import { useTableMoveRowColumn } from '@/registry/tiptap-ui/table-move-row-column-button'

function CustomMoveButton() {
  const { isVisible, handleMove, label, canMoveRowColumn, Icon } = useTableMoveRowColumn({
    direction: 'up',
    hideWhenUnavailable: true,
  })

  if (!isVisible) return null

  return (
    <button onClick={handleMove} disabled={!canMoveRowColumn}>
      <Icon />
      {label}
    </button>
  )
}
```

### Hook Configuration

The `UseTableMoveRowColumnConfig` interface supports the following options:

| Name                  | Type             | Default      | Description                                                                |
| --------------------- | ---------------- | ------------ | -------------------------------------------------------------------------- |
| `editor`              | `Editor \| null` | `undefined`  | The Tiptap editor instance. Uses context if omitted                        |
| `index`               | `number`         | `undefined`  | The index of the row or column to move. If omitted, uses current selection |
| `orientation`         | `Orientation`    | `undefined`  | Whether moving a "row" or "column". If omitted, uses current selection     |
| `tablePos`            | `number`         | `undefined`  | The position of the table in the document                                  |
| `direction`           | `MoveDirection`  | **required** | The direction to move: "up", "down", "left", or "right"                    |
| `hideWhenUnavailable` | `boolean`        | `false`      | Hide when moving isn't currently possible                                  |
| `onMoved`             | `() => void`     | `undefined`  | Callback function called after a successful move                           |

### Hook Return Values

| Name               | Type                  | Description                                           |
| ------------------ | --------------------- | ----------------------------------------------------- |
| `isVisible`        | `boolean`             | Whether the button should be shown                    |
| `handleMove`       | `() => void`          | Function to execute the move operation                |
| `label`            | `string`              | Accessible label for the button (e.g., "Move row up") |
| `canMoveRowColumn` | `boolean`             | Whether moving is currently possible                  |
| `Icon`             | `React.ComponentType` | The appropriate icon component for the move direction |

## Usage Examples

### Standalone Button

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { TableMoveRowColumnButton } from '@/registry/tiptap-ui/table-move-row-column-button'

export const StandaloneExample = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <table>
        <tbody>
          <tr>
            <th><p><strong>Name</strong></p></th>
            <th><p><strong>Age</strong></p></th>
            <th><p><strong>City</strong></p></th>
          </tr>
          <tr>
            <td><p>Alice</p></td>
            <td><p>30</p></td>
            <td><p>New York</p></td>
          </tr>
          <tr>
            <td><p>Bob</p></td>
            <td><p>25</p></td>
            <td><p>London</p></td>
          </tr>
          <tr>
            <td><p>Carol</p></td>
            <td><p>35</p></td>
            <td><p>Tokyo</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <div>
      <EditorContent editor={editor} />
      <div style={{ marginTop: 10 }}>
        <TableMoveRowColumnButton
          editor={editor}
          index={1}
          orientation="row"
          direction="up"
          text="Move Row 1 Up"
        />
        <TableMoveRowColumnButton
          editor={editor}
          index={1}
          orientation="row"
          direction="down"
          text="Move Row 1 Down"
        />
        <TableMoveRowColumnButton
          editor={editor}
          index={1}
          orientation="column"
          direction="left"
          text="Move Column 1 Left"
        />
        <TableMoveRowColumnButton
          editor={editor}
          index={1}
          orientation="column"
          direction="right"
          text="Move Column 1 Right"
        />
      </div>
    </div>
  )
}
```

### With Table Handle Integration

```tsx
'use client'

import { useCallback, useMemo, useState } from 'react'
import { EditorContent, EditorContext, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { useTableMoveRowColumn } from '@/registry/tiptap-ui/table-move-row-column-button'
import { TableHandle } from '@/registry/tiptap-ui/table-handle'
import type { TableHandleButtonProps } from '@/registry/tiptap-ui/table-handle'
import { Button } from '@/registry/tiptap-ui-primitive/button'
import {
  Menu,
  MenuButton,
  MenuContent,
  MenuGroup,
  MenuItem,
} from '@/registry/tiptap-ui-primitive/menu'
import { Combobox, ComboboxList } from '@/registry/tiptap-ui-primitive/combobox'
import { MoreVerticalIcon } from '@/registry/tiptap-icons/more-vertical-icon'
import type { Orientation } from '@/registry/lib/tiptap-table-utils'

const MENU_PLACEMENT_MAP: Record<Orientation, React.ComponentProps<typeof Menu>['placement']> = {
  row: 'top-start',
  column: 'bottom-start',
}

export const TableHandleIntegrationExample = () => {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <h2>Table Move Row/Column Demo</h2>
      <p>Hover over the table to see handle buttons. Click the menu to access move options.</p>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Country</strong></p></th>
            <th><p><strong>Capital</strong></p></th>
            <th><p><strong>Language</strong></p></th>
          </tr>
          <tr>
            <td><p>Spain</p></td>
            <td><p>Madrid</p></td>
            <td><p>Spanish</p></td>
          </tr>
          <tr>
            <td><p>Germany</p></td>
            <td><p>Berlin</p></td>
            <td><p>German</p></td>
          </tr>
          <tr>
            <td><p>Indonesia</p></td>
            <td><p>Jakarta</p></td>
            <td><p>Indonesian</p></td>
          </tr>
          <tr>
            <td><p>Netherlands</p></td>
            <td><p>Amsterdam</p></td>
            <td><p>Dutch</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <EditorContext.Provider value={{ editor }}>
      <EditorContent editor={editor} className="control-showcase" />
      <TableHandle editor={editor} rowButton={MoveMenu} columnButton={MoveMenu} />
    </EditorContext.Provider>
  )
}

function MoveMenu(props: TableHandleButtonProps) {
  const { editor, index, tablePos, orientation, onToggleOtherHandle } = props
  const [isMenuOpen, setIsMenuOpen] = useState(false)

  const moveUpAction = useTableMoveRowColumn({
    index,
    tablePos,
    orientation: 'row',
    direction: 'up',
    hideWhenUnavailable: true,
  })

  const moveDownAction = useTableMoveRowColumn({
    index,
    tablePos,
    orientation: 'row',
    direction: 'down',
    hideWhenUnavailable: true,
  })

  const moveLeftAction = useTableMoveRowColumn({
    index,
    tablePos,
    orientation: 'column',
    direction: 'left',
    hideWhenUnavailable: true,
  })

  const moveRightAction = useTableMoveRowColumn({
    index,
    tablePos,
    orientation: 'column',
    direction: 'right',
    hideWhenUnavailable: true,
  })

  const moveActions = useMemo(
    () => ({
      moveUp: moveUpAction,
      moveDown: moveDownAction,
      moveLeft: moveLeftAction,
      moveRight: moveRightAction,
    }),
    [moveUpAction, moveDownAction, moveLeftAction, moveRightAction],
  )

  const getMoveItems = useCallback(() => {
    const items: Array<{
      icon: React.ComponentType<any>
      label: string
      disabled: boolean
      onClick: () => void
    }> = []

    if (moveActions.moveUp.isVisible) {
      items.push({
        icon: moveActions.moveUp.Icon,
        label: moveActions.moveUp.label,
        disabled: !moveActions.moveUp.canMoveRowColumn,
        onClick: moveActions.moveUp.handleMove,
      })
    }

    if (moveActions.moveDown.isVisible) {
      items.push({
        icon: moveActions.moveDown.Icon,
        label: moveActions.moveDown.label,
        disabled: !moveActions.moveDown.canMoveRowColumn,
        onClick: moveActions.moveDown.handleMove,
      })
    }

    if (moveActions.moveLeft.isVisible) {
      items.push({
        icon: moveActions.moveLeft.Icon,
        label: moveActions.moveLeft.label,
        disabled: !moveActions.moveLeft.canMoveRowColumn,
        onClick: moveActions.moveLeft.handleMove,
      })
    }

    if (moveActions.moveRight.isVisible) {
      items.push({
        icon: moveActions.moveRight.Icon,
        label: moveActions.moveRight.label,
        disabled: !moveActions.moveRight.canMoveRowColumn,
        onClick: moveActions.moveRight.handleMove,
      })
    }

    return items
  }, [moveActions])

  const menuPlacement = useMemo(() => MENU_PLACEMENT_MAP[orientation], [orientation])

  const handleMenuToggle = useCallback(
    (isOpen: boolean) => {
      setIsMenuOpen(isOpen)

      if (isOpen) {
        editor.commands.freezeHandles()
        onToggleOtherHandle?.(false)
      } else {
        editor.commands.unfreezeHandles()
        onToggleOtherHandle?.(true)
      }
    },
    [editor, onToggleOtherHandle],
  )

  return (
    <Menu
      open={isMenuOpen}
      onOpenChange={handleMenuToggle}
      placement={menuPlacement}
      trigger={
        <MenuButton
          className={`tiptap-table-handle-menu ${isMenuOpen ? 'menu-opened' : ''} ${orientation}`}
        >
          <MoreVerticalIcon className="tiptap-button-icon" />
        </MenuButton>
      }
    >
      <MenuContent autoFocusOnShow modal>
        <Combobox style={{ position: 'absolute', left: '-9999px' }} />
        <ComboboxList>
          <MenuGroup>
            {getMoveItems().map((item) => (
              <MenuItem
                key={item.label}
                render={
                  <Button data-style="ghost" disabled={item.disabled}>
                    <item.icon className="tiptap-button-icon" />
                    <span className="tiptap-button-text">{item.label}</span>
                  </Button>
                }
                onClick={item.onClick}
              />
            ))}
          </MenuGroup>
        </ComboboxList>
      </MenuContent>
    </Menu>
  )
}
```

### Custom Hook Usage

```tsx
'use client'

import { useTableMoveRowColumn } from '@/registry/tiptap-ui/table-move-row-column-button'

function CustomMoveControls({ editor }: { editor: Editor | null }) {
  const moveUp = useTableMoveRowColumn({
    editor,
    orientation: 'row',
    direction: 'up',
    hideWhenUnavailable: true,
    onMoved: () => console.log('Moved up!'),
  })

  const moveDown = useTableMoveRowColumn({
    editor,
    orientation: 'row',
    direction: 'down',
    hideWhenUnavailable: true,
    onMoved: () => console.log('Moved down!'),
  })

  const moveLeft = useTableMoveRowColumn({
    editor,
    orientation: 'column',
    direction: 'left',
    hideWhenUnavailable: true,
  })

  const moveRight = useTableMoveRowColumn({
    editor,
    orientation: 'column',
    direction: 'right',
    hideWhenUnavailable: true,
  })

  return (
    <div>
      {moveUp.isVisible && (
        <button
          onClick={moveUp.handleMove}
          disabled={!moveUp.canMoveRowColumn}
          aria-label={moveUp.label}
        >
          <moveUp.Icon />
          {moveUp.label}
        </button>
      )}
      {moveDown.isVisible && (
        <button
          onClick={moveDown.handleMove}
          disabled={!moveDown.canMoveRowColumn}
          aria-label={moveDown.label}
        >
          <moveDown.Icon />
          {moveDown.label}
        </button>
      )}
      {moveLeft.isVisible && (
        <button
          onClick={moveLeft.handleMove}
          disabled={!moveLeft.canMoveRowColumn}
          aria-label={moveLeft.label}
        >
          <moveLeft.Icon />
          {moveLeft.label}
        </button>
      )}
      {moveRight.isVisible && (
        <button
          onClick={moveRight.handleMove}
          disabled={!moveRight.canMoveRowColumn}
          aria-label={moveRight.label}
        >
          <moveRight.Icon />
          {moveRight.label}
        </button>
      )}
    </div>
  )
}
```

## Behavior

### Direction and Orientation Validation

The component validates that directions are compatible with orientations:

- **Rows** can only move **up** or **down**
- **Columns** can only move **left** or **right**

Attempting to use an invalid combination (e.g., moving a row left) will be automatically prevented.

### Move Operation

The move operation:

1. **Validates the move** - Checks if the target position is valid and no merged cells would be affected
2. **Calculates target index** - Determines the destination index based on direction:
   - `up`: `currentIndex - 1`
   - `down`: `currentIndex + 1`
   - `left`: `currentIndex - 1`
   - `right`: `currentIndex + 1`
3. **Executes the move** - Uses ProseMirror's `moveTableRow` or `moveTableColumn` command
4. **Maintains selection** - Keeps the moved row/column selected after the operation

### Boundary Handling

Moving is **disabled** at table boundaries:

- **Row moving up**: First row (index 0) cannot move up
- **Row moving down**: Last row cannot move down
- **Column moving left**: First column (index 0) cannot move left
- **Column moving right**: Last column cannot move right

### Merged Cell Detection

The component performs advanced validation to prevent moves that would break merged cells:

1. **Checks source cells** - Validates that the row/column being moved doesn't contain merged cells that would break
2. **Checks target cells** - Validates that the destination row/column doesn't contain overlapping merged cells
3. **Uses `cellsOverlapRectangle`** - Utility function that checks if any cells in the selection have `rowspan > 1` or `colspan > 1` that would create conflicts

When merged cells are detected in either source or target positions, the move is automatically disabled.

### Selection Handling

The component handles two types of selections:

1. **CellSelection** - When multiple cells are selected, moves the entire selected range
2. **Regular selection** - When cursor is in a single cell, moves that row/column

For regular selections, the component:

- Creates a temporary cell selection for the source row/column
- Executes the move operation
- Restores selection to the moved position

## Requirements

### Dependencies

- `@tiptap/react` - Core Tiptap React integration
- `@tiptap/pm/tables` - ProseMirror table utilities (CellSelection, moveTableRow, moveTableColumn, selectedRect)
- `@tiptap/pm/state` - ProseMirror state management (Transaction)
- `react` - React framework

### Required Extensions

- `tableHandle` - Table handle extension for detecting row/column context

### Required Components (for full example)

- `table` - Table node extension (TableKit)
- `Button` (UI primitive) - Base button component
- `Menu`, `MenuButton`, `MenuContent`, `MenuItem` (UI primitives) - Menu components
- `TableHandle` - For hover-based table manipulation

### Referenced Utilities

- `useTiptapEditor` (hook) - Custom hook for editor instance management
- `tiptap-table-utils` (lib) - Utility functions:
  - `getTable` - Get table node information
  - `getTableSelectionType` - Determine selection type
  - `selectCellsByCoords` - Select cells by coordinates
  - `cellsOverlapRectangle` - Check for merged cells
  - `getIndexCoordinates` - Get cell coordinates for an index

## Related Components

- **[Table Handle](/ui-components/components/table-handle)** - For hover-based row/column manipulation
- **[Table Sort Row/Column Button](/ui-components/components/table-sort-row-column-button)** - For sorting rows and columns
- **[Table Delete Row/Column Button](/ui-components/components/table-delete-row-column-button)** - For deleting rows and columns
- **[Table Duplicate Row/Column Button](/ui-components/components/table-duplicate-row-column-button)** - For duplicating rows and columns
- **[Table Node (TableKit)](/ui-components/node-components/table-node)** - The core table node extension
- **Table Handle Extension** - Required extension for context detection
