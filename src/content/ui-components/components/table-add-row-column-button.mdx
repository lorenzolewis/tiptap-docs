---
title: Table Add Row/Column Button
meta:
  title: Table Add Row/Column Button | Tiptap UI Components
  description: A button component and hook for adding table rows and columns in Tiptap editors, with flexible positioning options for inserting rows and columns.
  category: UI Components
component:
  name: Table Add Row/Column Button
  description: A prebuilt button component and hook for adding rows above/below and columns left/right.
  type: component
  isFree: false
  isCloud: false
  isOpen: false
  isNew: true
  icon: TableIcon
tags:
  - type: start
---

import { CodeDemo } from '@/components/CodeDemo'

A button component and custom hook for adding table rows and columns in Tiptap editors. Supports inserting rows above/below and columns left/right with intelligent validation and selection management.

<CodeDemo
  isScrollable
  src="https://template.tiptap.dev/preview/tiptap-ui/table-add-row-column-button"
/>

## Installation

Add the component via the Tiptap CLI:

```bash
npx @tiptap/cli@latest add table-add-row-column-button
```

## Components

### `<TableAddRowColumnButton />`

A prebuilt button component for triggering row/column addition operations.

#### Usage

```tsx
import { TableAddRowColumnButton } from '@/registry/tiptap-ui/table-add-row-column-button'

function MyAddButton() {
  return <TableAddRowColumnButton editor={editor} index={0} orientation="row" side="above" />
}
```

### Props

| Name                  | Type                 | Default      | Description                                                                           |
| --------------------- | -------------------- | ------------ | ------------------------------------------------------------------------------------- |
| `editor`              | `Editor \| null`     | `undefined`  | The Tiptap editor instance                                                            |
| `index`               | `number`             | `undefined`  | The index of the row or column to add relative to. If omitted, uses current selection |
| `orientation`         | `Orientation`        | `undefined`  | Whether adding a "row" or "column". If omitted, uses current selection                |
| `tablePos`            | `number`             | `undefined`  | The position of the table in the document                                             |
| `side`                | `RowSide \| ColSide` | **required** | The side to add on: "above"/"below" for rows, "left"/"right" for columns              |
| `hideWhenUnavailable` | `boolean`            | `false`      | Hide the button when addition isn't currently possible                                |
| `onAdded`             | `() => void`         | `undefined`  | Callback function called after a successful addition                                  |
| `text`                | `string`             | `undefined`  | Optional text to display alongside the icon                                           |
| `...buttonProps`      | `ButtonProps`        | -            | All other props from the base Button component                                        |

## Hook

### `useTableAddRowColumn(config)`

For custom button implementations, use the hook directly:

#### Usage

```tsx
import { useTableAddRowColumn } from '@/registry/tiptap-ui/table-add-row-column-button'

function CustomAddButton() {
  const { isVisible, handleAdd, label, canAddRowColumn, Icon } = useTableAddRowColumn({
    side: 'above',
    hideWhenUnavailable: true,
  })

  if (!isVisible) return null

  return (
    <button onClick={handleAdd} disabled={!canAddRowColumn}>
      <Icon />
      {label}
    </button>
  )
}
```

### Hook Configuration

The `UseTableAddRowColumnConfig` interface supports the following options:

| Name                  | Type                 | Default      | Description                                                                           |
| --------------------- | -------------------- | ------------ | ------------------------------------------------------------------------------------- |
| `editor`              | `Editor \| null`     | `undefined`  | The Tiptap editor instance. Uses context if omitted                                   |
| `index`               | `number`             | `undefined`  | The index of the row or column to add relative to. If omitted, uses current selection |
| `orientation`         | `Orientation`        | `undefined`  | Whether adding a "row" or "column". If omitted, uses current selection                |
| `tablePos`            | `number`             | `undefined`  | The position of the table in the document                                             |
| `side`                | `RowSide \| ColSide` | **required** | The side to add on: "above"/"below" for rows, "left"/"right" for columns              |
| `hideWhenUnavailable` | `boolean`            | `false`      | Hide when addition isn't currently possible                                           |
| `onAdded`             | `() => void`         | `undefined`  | Callback function called after a successful addition                                  |

### Hook Return Values

| Name              | Type                  | Description                                                |
| ----------------- | --------------------- | ---------------------------------------------------------- |
| `isVisible`       | `boolean`             | Whether the button should be shown                         |
| `handleAdd`       | `() => void`          | Function to execute the addition operation                 |
| `label`           | `string`              | Accessible label for the button (e.g., "Insert row above") |
| `canAddRowColumn` | `boolean`             | Whether addition is currently possible                     |
| `Icon`            | `React.ComponentType` | The appropriate icon component for the addition side       |

## Usage Examples

### Standalone Button

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { TableAddRowColumnButton } from '@/registry/tiptap-ui/table-add-row-column-button'

export const StandaloneExample = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <table>
        <tbody>
          <tr>
            <th><p><strong>Name</strong></p></th>
            <th><p><strong>Age</strong></p></th>
            <th><p><strong>City</strong></p></th>
          </tr>
          <tr>
            <td><p>Alice</p></td>
            <td><p>30</p></td>
            <td><p>New York</p></td>
          </tr>
          <tr>
            <td><p>Bob</p></td>
            <td><p>25</p></td>
            <td><p>London</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <div>
      <EditorContent editor={editor} />
      <div style={{ marginTop: 10 }}>
        <TableAddRowColumnButton
          editor={editor}
          index={1}
          orientation="row"
          side="above"
          text="Insert Row Above"
        />
        <TableAddRowColumnButton
          editor={editor}
          index={1}
          orientation="row"
          side="below"
          text="Insert Row Below"
        />
        <TableAddRowColumnButton
          editor={editor}
          index={1}
          orientation="column"
          side="left"
          text="Insert Column Left"
        />
        <TableAddRowColumnButton
          editor={editor}
          index={1}
          orientation="column"
          side="right"
          text="Insert Column Right"
        />
      </div>
    </div>
  )
}
```

### With Table Handle Integration

```tsx
'use client'

import { useCallback, useMemo, useState } from 'react'
import { EditorContent, EditorContext, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { useTableAddRowColumn } from '@/registry/tiptap-ui/table-add-row-column-button'
import { TableHandle } from '@/registry/tiptap-ui/table-handle'
import type { TableHandleButtonProps } from '@/registry/tiptap-ui/table-handle'
import { Button } from '@/registry/tiptap-ui-primitive/button'
import {
  Menu,
  MenuButton,
  MenuContent,
  MenuGroup,
  MenuItem,
} from '@/registry/tiptap-ui-primitive/menu'
import { Combobox, ComboboxList } from '@/registry/tiptap-ui-primitive/combobox'
import { MoreVerticalIcon } from '@/registry/tiptap-icons/more-vertical-icon'
import type { Orientation } from '@/registry/lib/tiptap-table-utils'

const MENU_PLACEMENT_MAP: Record<Orientation, React.ComponentProps<typeof Menu>['placement']> = {
  row: 'top-start',
  column: 'bottom-start',
}

export const TableHandleIntegrationExample = () => {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <h2>Table Add Row/Column Demo</h2>
      <p>Hover over the table to see handle buttons. Click the menu to access addition options.</p>
      <table>
        <tbody>
          <tr>
            <th><p><strong>Country</strong></p></th>
            <th><p><strong>Capital</strong></p></th>
            <th><p><strong>Language</strong></p></th>
          </tr>
          <tr>
            <td><p>Spain</p></td>
            <td><p>Madrid</p></td>
            <td><p>Spanish</p></td>
          </tr>
          <tr>
            <td><p>Germany</p></td>
            <td><p>Berlin</p></td>
            <td><p>German</p></td>
          </tr>
          <tr>
            <td><p>Indonesia</p></td>
            <td><p>Jakarta</p></td>
            <td><p>Indonesian</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <EditorContext.Provider value={{ editor }}>
      <EditorContent editor={editor} className="control-showcase" />
      <TableHandle editor={editor} rowButton={AddMenu} columnButton={AddMenu} />
    </EditorContext.Provider>
  )
}

function AddMenu(props: TableHandleButtonProps) {
  const { editor, index, tablePos, orientation, onToggleOtherHandle } = props
  const [isMenuOpen, setIsMenuOpen] = useState(false)

  const addAbove = useTableAddRowColumn({
    index,
    tablePos,
    orientation: 'row',
    side: 'above',
    hideWhenUnavailable: true,
  })

  const addBelow = useTableAddRowColumn({
    index,
    tablePos,
    orientation: 'row',
    side: 'below',
    hideWhenUnavailable: true,
  })

  const addLeft = useTableAddRowColumn({
    index,
    tablePos,
    orientation: 'column',
    side: 'left',
    hideWhenUnavailable: true,
  })

  const addRight = useTableAddRowColumn({
    index,
    tablePos,
    orientation: 'column',
    side: 'right',
    hideWhenUnavailable: true,
  })

  const addActions = useMemo(
    () => ({
      addAbove,
      addBelow,
      addLeft,
      addRight,
    }),
    [addAbove, addBelow, addLeft, addRight],
  )

  const getAddItems = useCallback(() => {
    const items: Array<{
      icon: React.ComponentType<any>
      label: string
      disabled: boolean
      onClick: () => void
    }> = []

    if (orientation === 'row') {
      if (addActions.addAbove.isVisible) {
        items.push({
          icon: addActions.addAbove.Icon,
          label: addActions.addAbove.label,
          disabled: !addActions.addAbove.canAddRowColumn,
          onClick: addActions.addAbove.handleAdd,
        })
      }
      if (addActions.addBelow.isVisible) {
        items.push({
          icon: addActions.addBelow.Icon,
          label: addActions.addBelow.label,
          disabled: !addActions.addBelow.canAddRowColumn,
          onClick: addActions.addBelow.handleAdd,
        })
      }
    } else {
      if (addActions.addLeft.isVisible) {
        items.push({
          icon: addActions.addLeft.Icon,
          label: addActions.addLeft.label,
          disabled: !addActions.addLeft.canAddRowColumn,
          onClick: addActions.addLeft.handleAdd,
        })
      }
      if (addActions.addRight.isVisible) {
        items.push({
          icon: addActions.addRight.Icon,
          label: addActions.addRight.label,
          disabled: !addActions.addRight.canAddRowColumn,
          onClick: addActions.addRight.handleAdd,
        })
      }
    }

    return items
  }, [orientation, addActions])

  const menuPlacement = useMemo(() => MENU_PLACEMENT_MAP[orientation], [orientation])

  const handleMenuToggle = useCallback(
    (isOpen: boolean) => {
      setIsMenuOpen(isOpen)

      if (isOpen) {
        editor.commands.freezeHandles()
        onToggleOtherHandle?.(false)
      } else {
        editor.commands.unfreezeHandles()
        onToggleOtherHandle?.(true)
      }
    },
    [editor, onToggleOtherHandle],
  )

  return (
    <Menu
      open={isMenuOpen}
      onOpenChange={handleMenuToggle}
      placement={menuPlacement}
      trigger={
        <MenuButton
          className={`tiptap-table-handle-menu ${isMenuOpen ? 'menu-opened' : ''} ${orientation}`}
        >
          <MoreVerticalIcon className="tiptap-button-icon" />
        </MenuButton>
      }
    >
      <MenuContent autoFocusOnShow modal>
        <Combobox style={{ position: 'absolute', left: '-9999px' }} />
        <ComboboxList>
          <MenuGroup>
            {getAddItems().map((item) => (
              <MenuItem
                key={item.label}
                onClick={item.onClick}
                disabled={item.disabled}
                render={
                  <Button data-style="ghost" data-active-state="off">
                    <item.icon className="tiptap-button-icon" />
                    <span>{item.label}</span>
                  </Button>
                }
              />
            ))}
          </MenuGroup>
        </ComboboxList>
      </MenuContent>
    </Menu>
  )
}
```

### Using Hook Directly

```tsx
'use client'

import { useEditor } from '@tiptap/react'
import { useTableAddRowColumn } from '@/registry/tiptap-ui/table-add-row-column-button'

export const HookExample = () => {
  const editor = useEditor({
    // ... editor config
  })

  const addAbove = useTableAddRowColumn({
    editor,
    orientation: 'row',
    side: 'above',
    hideWhenUnavailable: true,
    onAdded: () => console.log('Row added above!'),
  })

  const addBelow = useTableAddRowColumn({
    editor,
    orientation: 'row',
    side: 'below',
    hideWhenUnavailable: true,
  })

  const addLeft = useTableAddRowColumn({
    editor,
    orientation: 'column',
    side: 'left',
    hideWhenUnavailable: true,
  })

  const addRight = useTableAddRowColumn({
    editor,
    orientation: 'column',
    side: 'right',
    hideWhenUnavailable: true,
  })

  return (
    <div>
      {addAbove.isVisible && (
        <button
          onClick={addAbove.handleAdd}
          disabled={!addAbove.canAddRowColumn}
          aria-label={addAbove.label}
        >
          <addAbove.Icon />
          {addAbove.label}
        </button>
      )}
      {addBelow.isVisible && (
        <button
          onClick={addBelow.handleAdd}
          disabled={!addBelow.canAddRowColumn}
          aria-label={addBelow.label}
        >
          <addBelow.Icon />
          {addBelow.label}
        </button>
      )}
      {addLeft.isVisible && (
        <button
          onClick={addLeft.handleAdd}
          disabled={!addLeft.canAddRowColumn}
          aria-label={addLeft.label}
        >
          <addLeft.Icon />
          {addLeft.label}
        </button>
      )}
      {addRight.isVisible && (
        <button
          onClick={addRight.handleAdd}
          disabled={!addRight.canAddRowColumn}
          aria-label={addRight.label}
        >
          <addRight.Icon />
          {addRight.label}
        </button>
      )}
    </div>
  )
}
```

## Behavior

### Side and Orientation Validation

The component validates that sides are compatible with orientations:

- **Rows** can be added **above** or **below**
- **Columns** can be added **left** or **right**

### Add Operation

The add operation:

1. **Validates the operation** - Checks if the addition is valid in the current state
2. **Determines the target position** - Based on the side parameter:
   - `above`: Inserts a new row above the current index (new row takes the same index)
   - `below`: Inserts a new row below the current index (new row is at index + 1)
   - `left`: Inserts a new column to the left (new column takes the same index)
   - `right`: Inserts a new column to the right (new column is at index + 1)
3. **Executes the addition** - Uses ProseMirror's `addRowBefore`, `addRowAfter`, `addColumnBefore`, or `addColumnAfter` command
4. **Updates selection** - Selects the newly added row/column after the operation

### Selection Handling

The component handles two types of selections:

1. **CellSelection** - When multiple cells are selected, adds relative to the selected range
2. **Regular selection** - When cursor is in a single cell, adds relative to that row/column

For regular selections, the component:

- Creates a temporary cell selection for the target row/column
- Executes the add operation
- Updates selection to the newly added position

### New Index Calculation

After a successful addition, the component calculates the new index:

- **Above/Left**: New index equals the original index (original content shifts)
- **Below/Right**: New index equals original index + 1

This ensures the selection correctly follows the newly added content.

## Requirements

### Dependencies

- `@tiptap/react` - Core Tiptap React integration
- `@tiptap/pm/tables` - ProseMirror table utilities (CellSelection, addRowBefore, addRowAfter, addColumnBefore, addColumnAfter)
- `@tiptap/pm/state` - ProseMirror state management (Transaction)
- `react` - React framework

### Required Extensions

- `table` - Table node extension (TableKit)

### Required Components (for full example)

- `Button` (UI primitive) - Base button component
- `Menu`, `MenuButton`, `MenuContent`, `MenuItem` (UI primitives) - Menu components
- `TableHandle` - For hover-based table manipulation

### Referenced Utilities

- `useTiptapEditor` (hook) - Custom hook for editor instance management
- `tiptap-table-utils` (lib) - Utility functions:
  - `getTable` - Get table node information
  - `getTableSelectionType` - Determine selection type
  - `selectCellsByCoords` - Select cells by coordinates
  - `updateSelectionAfterAction` - Update selection after table operations

### Icons

- `AddRowTopIcon` - Icon for adding row above
- `AddRowBottomIcon` - Icon for adding row below
- `AddColLeftIcon` - Icon for adding column left
- `AddColRightIcon` - Icon for adding column right

## Related Components

- **Table Handle** - For hover-based row/column manipulation
- **Table Move Row/Column Button** - For moving rows and columns
- **Table Delete Row/Column Button** - For deleting rows and columns
- **Table Duplicate Row/Column Button** - For duplicating rows and columns
- **Table Node (TableKit)** - The core table node extension
- **Table Handle Extension** - Extension for context detection
