---
title: Table Merge/Split Cell Button
meta:
  title: Table Merge/Split Cell Button | Tiptap UI Components
  description: A button component and hook for merging and splitting table cells in Tiptap editors, with intelligent cell selection validation.
  category: UI Components
component:
  name: Table Merge/Split Cell Button
  description: A prebuilt button component and hook for merging multiple cells into one and splitting merged cells back into individual cells.
  type: component
  isFree: false
  isCloud: false
  isOpen: false
  isNew: true
  icon: TableIcon
tags:
  - type: start
---

import { CodeDemo } from '@/components/CodeDemo'

A button component and custom hook for merging and splitting table cells in Tiptap editors. Supports merging multiple selected cells into a single cell and splitting merged cells back into individual cells.

<CodeDemo
  isScrollable
  src="https://template.tiptap.dev/preview/tiptap-ui/table-merge-split-cell-button"
/>

## Installation

Add the component via the Tiptap CLI:

```bash
npx @tiptap/cli@latest add table-merge-split-cell-button
```

## Components

### `<TableMergeSplitCellButton />`

A prebuilt button component for triggering cell merge or split operations.

#### Usage

```tsx
import { TableMergeSplitCellButton } from '@/registry/tiptap-ui/table-merge-split-cell-button'

function MyMergeButton() {
  return <TableMergeSplitCellButton editor={editor} action="merge" />
}

function MySplitButton() {
  return <TableMergeSplitCellButton editor={editor} action="split" />
}
```

### Props

| Name                  | Type               | Default      | Description                                                |
| --------------------- | ------------------ | ------------ | ---------------------------------------------------------- |
| `editor`              | `Editor \| null`   | `undefined`  | The Tiptap editor instance. Uses context if omitted        |
| `action`              | `MergeSplitAction` | **required** | The action to perform: "merge" or "split"                  |
| `hideWhenUnavailable` | `boolean`          | `false`      | Hide the button when the action isn't currently possible   |
| `onExecuted`          | `(action) => void` | `undefined`  | Callback function called after a successful merge or split |
| `text`                | `string`           | `undefined`  | Optional text to display alongside the icon                |
| `...buttonProps`      | `ButtonProps`      | -            | All other props from the base Button component             |

## Hook

### `useTableMergeSplitCell(config)`

For custom button implementations, use the hook directly:

#### Usage

```tsx
import { useTableMergeSplitCell } from '@/registry/tiptap-ui/table-merge-split-cell-button'

function CustomMergeButton() {
  const { isVisible, handleExecute, label, canExecute, Icon } = useTableMergeSplitCell({
    action: 'merge',
    hideWhenUnavailable: true,
  })

  if (!isVisible) return null

  return (
    <button onClick={handleExecute} disabled={!canExecute}>
      <Icon />
      {label}
    </button>
  )
}
```

### Hook Configuration

The `UseTableMergeSplitCellConfig` interface supports the following options:

| Name                  | Type               | Default      | Description                                                |
| --------------------- | ------------------ | ------------ | ---------------------------------------------------------- |
| `editor`              | `Editor \| null`   | `undefined`  | The Tiptap editor instance. Uses context if omitted        |
| `action`              | `MergeSplitAction` | **required** | The action to perform: "merge" or "split"                  |
| `hideWhenUnavailable` | `boolean`          | `false`      | Hide when the action isn't currently possible              |
| `onExecuted`          | `(action) => void` | `undefined`  | Callback function called after a successful merge or split |

### Hook Return Values

| Name            | Type                  | Description                                           |
| --------------- | --------------------- | ----------------------------------------------------- |
| `isVisible`     | `boolean`             | Whether the button should be shown                    |
| `handleExecute` | `() => boolean`       | Function to execute the merge/split operation         |
| `label`         | `string`              | Accessible label for the button (e.g., "Merge cells") |
| `canExecute`    | `boolean`             | Whether the action is currently possible              |
| `Icon`          | `React.ComponentType` | The appropriate icon component for the action         |

## Usage Examples

### Standalone Button

```tsx
'use client'

import { EditorContent, useEditor } from '@tiptap/react'
import { StarterKit } from '@tiptap/starter-kit'
import { TableKit } from '@/registry/tiptap-node/table-node/table-node-extension'
import { TableHandle as TableHandleExtension } from '@/registry/tiptap-extension/table-handle'
import { TableMergeSplitCellButton } from '@/registry/tiptap-ui/table-merge-split-cell-button'

export const StandaloneExample = () => {
  const editor = useEditor({
    extensions: [StarterKit, TableKit, TableHandleExtension],
    content: `
      <table>
        <tbody>
          <tr>
            <th><p><strong>Product</strong></p></th>
            <th><p><strong>Price</strong></p></th>
            <th><p><strong>Stock</strong></p></th>
          </tr>
          <tr>
            <td><p>Laptop</p></td>
            <td><p>$999</p></td>
            <td><p>25</p></td>
          </tr>
          <tr>
            <td><p>Phone</p></td>
            <td><p>$699</p></td>
            <td><p>50</p></td>
          </tr>
          <tr>
            <td><p>Tablet</p></td>
            <td><p>$399</p></td>
            <td><p>30</p></td>
          </tr>
        </tbody>
      </table>
    `,
  })

  return (
    <div>
      <EditorContent editor={editor} />
      <div style={{ marginTop: 10 }}>
        <TableMergeSplitCellButton editor={editor} action="merge" text="Merge Selected Cells" />
        <TableMergeSplitCellButton editor={editor} action="split" text="Split Merged Cell" />
      </div>
    </div>
  )
}
```

### Using the Hook Directly

```tsx
'use client'

import { useTableMergeSplitCell } from '@/registry/tiptap-ui/table-merge-split-cell-button'

function CustomMergeSplitControls() {
  const mergeAction = useTableMergeSplitCell({
    action: 'merge',
    hideWhenUnavailable: true,
    onExecuted: () => console.log('Cells merged!'),
  })

  const splitAction = useTableMergeSplitCell({
    action: 'split',
    hideWhenUnavailable: true,
    onExecuted: () => console.log('Cell split!'),
  })

  return (
    <div>
      {mergeAction.isVisible && (
        <button
          onClick={mergeAction.handleExecute}
          disabled={!mergeAction.canExecute}
          aria-label={mergeAction.label}
        >
          <mergeAction.Icon />
          {mergeAction.label}
        </button>
      )}
      {splitAction.isVisible && (
        <button
          onClick={splitAction.handleExecute}
          disabled={!splitAction.canExecute}
          aria-label={splitAction.label}
        >
          <splitAction.Icon />
          {splitAction.label}
        </button>
      )}
    </div>
  )
}
```

## Behavior

### Merge Operation

The merge operation:

1. **Validates selection** - Checks if multiple adjacent cells are selected using CellSelection
2. **Checks compatibility** - Ensures selected cells form a valid rectangular region
3. **Executes merge** - Uses ProseMirror's `mergeCells` command to combine cells
4. **Preserves content** - Maintains the content from all merged cells in the resulting cell
5. **Updates attributes** - Sets appropriate `colspan` and `rowspan` attributes

**Requirements for merging:**

- Multiple cells must be selected (CellSelection with 2+ cells)
- Selected cells must form a rectangular region
- Cells must be adjacent (no gaps in selection)

### Split Operation

The split operation:

1. **Validates selection** - Checks if a merged cell is currently selected
2. **Detects merged attributes** - Identifies cells with `colspan > 1` or `rowspan > 1`
3. **Executes split** - Uses ProseMirror's `splitCell` command to divide the cell
4. **Distributes content** - Places original content in the first cell after split
5. **Creates empty cells** - Fills remaining cells with empty content

**Requirements for splitting:**

- A single merged cell must be selected
- Cell must have `colspan > 1` or `rowspan > 1` attributes

### Selection Handling

The component handles two types of selections:

1. **CellSelection** - When multiple cells are selected (drag-select or Shift+arrow keys)

   - **Merge** is available when 2+ adjacent cells are selected
   - **Split** is not available (requires single merged cell)

2. **Regular selection** - When cursor is in a single cell
   - **Merge** is not available (requires multiple cells)
   - **Split** is available only if the cell has colspan/rowspan > 1

### Action Availability

The component intelligently determines which action is available:

- **Merge button enabled** when:

  - Multiple cells are selected via CellSelection
  - Selected cells form a valid rectangular region
  - Editor is editable

- **Split button enabled** when:
  - A single merged cell is selected
  - Cell has `colspan > 1` or `rowspan > 1`
  - Editor is editable

Both operations are **disabled** when:

- Editor is not editable
- Required table extension is not available
- Selection doesn't meet operation requirements

## Requirements

### Dependencies

- `@tiptap/react` - Core Tiptap React integration
- `@tiptap/pm/tables` - ProseMirror table utilities (mergeCells, splitCell)
- `react` - React framework

### Required Extensions

- `table` - Table node extension (TableKit) for basic table functionality

### Required Components (for full example)

- `Button` (UI primitive) - Base button component
- `ButtonGroup` (UI primitive) - For grouping merge/split buttons
- `TableHandle` - For hover-based table manipulation (optional)

### Referenced Utilities

- `useTiptapEditor` (hook) - Custom hook for editor instance management
- `isExtensionAvailable` (lib) - Utility to check if required extensions are loaded

### Icons

- `TableCellMergeIcon` - Icon for merge action
- `TableCellSplitIcon` - Icon for split action

## Related Components

- **[Table Handle](/ui-components/components/table-handle)** - For hover-based cell manipulation
- **[Table Move Row/Column Button](/ui-components/components/table-move-row-column-button)** - For moving rows and columns
- **[Table Delete Row/Column Button](/ui-components/components/table-delete-row-column-button)** - For deleting rows and columns
- **[Table Duplicate Row/Column Button](/ui-components/components/table-duplicate-row-column-button)** - For duplicating rows and columns
- **[Table Sort Row/Column Button](/ui-components/components/table-sort-row-column-button)** - For sorting rows and columns
- **[Table Node (TableKit)](/ui-components/node-components/table-node)** - The core table node extension
- **Table Handle Extension** - Extension for table manipulation context
